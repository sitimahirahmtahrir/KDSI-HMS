<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Maintenance Management - KDSI Staff House Management System</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .waiting-time {
      font-size: 0.9em;
      color: grey;
    }
    .status-pending {
      color: orange;
    }
    .status-in-progress {
      color: blue;
    }
    .status-resolved {
      color: green;
    }
    .priority-high {
      color: red;
    }
    .priority-low {
      color: green;
    }
    .closed-ticket {
      text-decoration: line-through;
    }
    footer {
      position: fixed;
      bottom: 0;
      width: 100%;
      background-color: #f8f9fa;
      padding: 10px;
    }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand" href="#">KDSI Staff House Management System</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="#">Dashboard</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Close Ticket</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Logout</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="container mt-4">
    <h2>Maintenance Management</h2>

    <!-- Maintenance Table -->
    <div class="card mb-4">
      <div class="card-header">Active Maintenance Tickets</div>
      <div class="card-body">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>ID Ticket</th>
              <th>User Name</th>
              <th>Subject Problem</th>
              <th>Status</th>
              <th>Priority</th>
              <th>Waiting Time</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="active-tickets">
            <tr>
              <td>101</td>
              <td>John Doe</td>
              <td>Plumbing issue</td>
              <td class="status-pending">Pending</td>
              <td class="priority-high">High</td>
              <td class="waiting-time">2 days</td>
              <td>
                <a href="#" class="btn btn-primary btn-sm view-ticket-btn" data-ticket-id="101">View Ticket</a>
                <select class="form-control status-dropdown" data-ticket-id="101">
                  <option value="Pending" selected>Pending</option>
                  <option value="In Progress">In Progress</option>
                  <option value="Resolved">Resolved</option>
                </select>
                <button class="btn btn-danger btn-sm mt-2 close-ticket-btn" data-ticket-id="101">Request Close Ticket</button>
              </td>
            </tr>
            <tr>
              <td>102</td>
              <td>Jane Smith</td>
              <td>Electrical issue</td>
              <td class="status-in-progress">In Progress</td>
              <td class="priority-low">Low</td>
              <td class="waiting-time">1 day</td>
              <td>
                <a href="#" class="btn btn-primary btn-sm view-ticket-btn" data-ticket-id="102">View Ticket</a>
                <select class="form-control status-dropdown" data-ticket-id="102">
                  <option value="Pending">Pending</option>
                  <option value="In Progress" selected>In Progress</option>
                  <option value="Resolved">Resolved</option>
                </select>
                <button class="btn btn-danger btn-sm mt-2 close-ticket-btn" data-ticket-id="102">Request Close Ticket</button>
              </td>
            </tr>
            <!-- Add more tickets as necessary -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- List to Notification Updates -->
    <div class="card mb-4">
      <div class="card-header d-flex justify-content-between align-items-center">
        <span>Notification</span>
        <div>
          <a href="#" class="btn btn-sm btn-primary">Add New Notification</a>
        </div>
      </div>
      <div class="card-body">
        <div class="panel-content">
          <div class="card">
            <div class="card-body">
              <div class="alert alert-info" role="alert">
                <strong>Info:</strong> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut elit tellus, luctus nec ullamcorper mattis, pulvinar dapibus leo.
                <br><td><a href="#">View</a> | <a href="#">Edit</a> | <a href="#">Close</a></td></br>
              </div>
              <div class="alert alert-warning" role="alert">
                <strong>Warning:</strong> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut elit tellus, luctus nec ullamcorper mattis, pulvinar dapibus leo.
                <br><td><a href="#">View</a> | <a href="#">Edit</a> | <a href="#">Close</a></td></br>
              </div>
              <div class="alert alert-danger" role="alert">
                <strong>Error:</strong> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut elit tellus, luctus nec ullamcorper mattis, pulvinar dapibus leo.
                <br><td><a href="#">View</a> | <a href="#">Edit</a> | <a href="#">Close</a></td></br>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    
      </div>
    </div>
  </div>

  <footer>
    <div class="container text-center">
      <p><a href="#">Terms of Service</a> | <a href="#">Privacy Policy</a></p>
    </div>
  </footer>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script>
    // JavaScript for handling status change and closing tickets
    document.querySelectorAll('.status-dropdown').forEach(function(select) {
      select.addEventListener('change', function() {
        const ticketId = this.getAttribute('data-ticket-id');
        const newStatus = this.value;
        // Update the status in the table
        const row = document.querySelector(`.status-dropdown[data-ticket-id="${ticketId}"]`).closest('tr');
        const statusCell = row.querySelector('td:nth-child(4)');
        statusCell.className = '';
        statusCell.classList.add('status-' + newStatus.toLowerCase().replace(' ', '-'));
        statusCell.textContent = newStatus;
      });
    });

    document.querySelectorAll('.close-ticket-btn').forEach(function(button) {
      button.addEventListener('click', function() {
        const ticketId = this.getAttribute('data-ticket-id');
        // Move the ticket to the closed tickets table
        const row = document.querySelector(`.close-ticket-btn[data-ticket-id="${ticketId}"]`).closest('tr');
        document.getElementById('closed-tickets').appendChild(row);
        row.classList.add('closed-ticket');
        // Remove the actions column for closed tickets
        row.removeChild(row.lastChild);
      });
    });
  </script>
</body>
</html>
